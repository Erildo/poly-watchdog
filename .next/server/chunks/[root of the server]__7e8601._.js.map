{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/lib/discord.ts"],"sourcesContent":["import type { Trade, Position } from '@/types';\n\nexport class DiscordNotifier {\n  private webhookUrl: string;\n\n  constructor(webhookUrl: string) {\n    this.webhookUrl = webhookUrl;\n  }\n\n  async sendTradeNotification(\n    username: string,\n    trade: Trade,\n    isEntry: boolean\n  ): Promise<void> {\n    const action = isEntry ? 'üü¢ ENTERED' : 'üî¥ EXITED';\n    const color = isEntry ? 0x00ff00 : 0xff0000;\n\n    const embed = {\n      title: `${action} Position`,\n      description: `**${username}** ${isEntry ? 'opened' : 'closed'} a position`,\n      color,\n      fields: [\n        {\n          name: 'üìä Market',\n          value: trade.market.question,\n          inline: false,\n        },\n        {\n          name: 'üéØ Outcome',\n          value: trade.outcome,\n          inline: true,\n        },\n        {\n          name: 'üí∞ Size',\n          value: `$${trade.size.toFixed(2)}`,\n          inline: true,\n        },\n        {\n          name: 'üíµ Price',\n          value: `${(trade.price * 100).toFixed(1)}¬¢`,\n          inline: true,\n        },\n        {\n          name: '‚è∞ Time',\n          value: new Date(trade.timestamp).toLocaleString(),\n          inline: false,\n        },\n      ],\n      footer: {\n        text: 'Polymarket Tracker',\n      },\n      timestamp: new Date(trade.timestamp).toISOString(),\n    };\n\n    if (trade.txHash) {\n      embed.fields.push({\n        name: 'üîó Transaction',\n        value: `[View on Explorer](https://polygonscan.com/tx/${trade.txHash})`,\n        inline: false,\n      });\n    }\n\n    await this.sendWebhook({ embeds: [embed] });\n  }\n\n  async sendPositionUpdate(\n    username: string,\n    position: Position\n  ): Promise<void> {\n    const pnlEmoji = position.pnl >= 0 ? 'üìà' : 'üìâ';\n    const pnlColor = position.pnl >= 0 ? 0x00ff00 : 0xff0000;\n\n    const embed = {\n      title: `${pnlEmoji} Position Update`,\n      description: `**${username}**'s position status`,\n      color: pnlColor,\n      fields: [\n        {\n          name: 'üìä Market',\n          value: position.market.question,\n          inline: false,\n        },\n        {\n          name: 'üéØ Outcome',\n          value: position.outcome,\n          inline: true,\n        },\n        {\n          name: 'üí∞ Size',\n          value: `$${position.size.toFixed(2)}`,\n          inline: true,\n        },\n        {\n          name: 'üíµ Avg Price',\n          value: `${(position.averagePrice * 100).toFixed(1)}¬¢`,\n          inline: true,\n        },\n        {\n          name: 'üìà Current Price',\n          value: `${(position.currentPrice * 100).toFixed(1)}¬¢`,\n          inline: true,\n        },\n        {\n          name: 'üí∏ P&L',\n          value: `$${position.pnl >= 0 ? '+' : ''}${position.pnl.toFixed(2)} (${position.pnlPercentage >= 0 ? '+' : ''}${position.pnlPercentage.toFixed(2)}%)`,\n          inline: true,\n        },\n        {\n          name: '‚è∞ Opened',\n          value: new Date(position.createdAt).toLocaleString(),\n          inline: false,\n        },\n      ],\n      footer: {\n        text: 'Polymarket Tracker',\n      },\n      timestamp: new Date().toISOString(),\n    };\n\n    await this.sendWebhook({ embeds: [embed] });\n  }\n\n  private async sendWebhook(payload: any): Promise<void> {\n    try {\n      const response = await fetch(this.webhookUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        console.error('Discord webhook failed:', response.statusText);\n      }\n    } catch (error) {\n      console.error('Error sending Discord notification:', error);\n    }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/api/notify/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { DiscordNotifier } from '@/lib/discord';\nimport type { Trade, Position } from '@/types';\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const { webhookUrl, username, trade, position, type } = body;\n\n    if (!webhookUrl) {\n      return NextResponse.json(\n        { error: 'Webhook URL required' },\n        { status: 400 }\n      );\n    }\n\n    const notifier = new DiscordNotifier(webhookUrl);\n\n    if (type === 'trade' && trade) {\n      const isEntry = trade.type === 'BUY';\n      await notifier.sendTradeNotification(username, trade as Trade, isEntry);\n    } else if (type === 'position' && position) {\n      await notifier.sendPositionUpdate(username, position as Position);\n    } else {\n      return NextResponse.json(\n        { error: 'Invalid notification type or missing data' },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json({ success: true });\n  } catch (error) {\n    console.error('Notification error:', error);\n    return NextResponse.json(\n      { error: 'Failed to send notification' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAGO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG;QAExD,IAAI,CAAC,YAAY;YACf,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuB,GAChC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,WAAW,IAAI,gHAAA,CAAA,kBAAe,CAAC;QAErC,IAAI,SAAS,WAAW,OAAO;YAC7B,MAAM,UAAU,MAAM,IAAI,KAAK;YAC/B,MAAM,SAAS,qBAAqB,CAAC,UAAU,OAAgB;QACjE,OAAO,IAAI,SAAS,cAAc,UAAU;YAC1C,MAAM,SAAS,kBAAkB,CAAC,UAAU;QAC9C,OAAO;YACL,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA4C,GACrD;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA8B,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF"}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}