{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/components/TradingChart.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\nimport { createChart, IChartApi, ISeriesApi, ColorType } from 'lightweight-charts';\nimport { Candle, UCSSignal, CamarillaPivots } from '../types';\n\ninterface TradingChartProps {\n  candles: Candle[];\n  signals: UCSSignal[];\n  pivots: CamarillaPivots | null;\n  currentPrice: number;\n}\n\nexport function TradingChart({ candles, signals, pivots, currentPrice }: TradingChartProps) {\n  const chartContainerRef = useRef<HTMLDivElement>(null);\n  const chartRef = useRef<IChartApi | null>(null);\n  const candlestickSeriesRef = useRef<ISeriesApi<'Candlestick'> | null>(null);\n  const pivotLinesRef = useRef<ISeriesApi<'Line'>[]>([]);\n\n  useEffect(() => {\n    if (!chartContainerRef.current) return;\n\n    // Create chart\n    const chart = createChart(chartContainerRef.current, {\n      layout: {\n        background: { type: ColorType.Solid, color: '#0a0a0a' },\n        textColor: '#d1d5db',\n      },\n      grid: {\n        vertLines: { color: '#1f1f1f' },\n        horzLines: { color: '#1f1f1f' },\n      },\n      width: chartContainerRef.current.clientWidth,\n      height: 600,\n      timeScale: {\n        timeVisible: true,\n        secondsVisible: false,\n      },\n      rightPriceScale: {\n        borderColor: '#2a2e39',\n      },\n      crosshair: {\n        mode: 1,\n      },\n    });\n\n    chartRef.current = chart;\n\n    // Add candlestick series\n    const candlestickSeries = chart.addCandlestickSeries({\n      upColor: '#26a69a',\n      downColor: '#ef5350',\n      borderUpColor: '#26a69a',\n      borderDownColor: '#ef5350',\n      wickUpColor: '#26a69a',\n      wickDownColor: '#ef5350',\n    });\n\n    candlestickSeriesRef.current = candlestickSeries;\n\n    // Handle resize\n    const handleResize = () => {\n      if (chartContainerRef.current && chartRef.current) {\n        chartRef.current.applyOptions({\n          width: chartContainerRef.current.clientWidth,\n        });\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      chart.remove();\n    };\n  }, []);\n\n  // Update candles - DISPLAY LAST 3 WEEKS\n  useEffect(() => {\n    if (!candlestickSeriesRef.current || candles.length === 0) return;\n\n    // CHANGE THIS LINE to adjust chart timeframe:\n    // 24 hours: const timeAgo = now - (24 * 60 * 60 * 1000);\n    // 3 weeks: const timeAgo = now - (21 * 24 * 60 * 60 * 1000);\n    const now = Date.now();\n    const timeAgo = now - (21 * 24 * 60 * 60 * 1000); // 3 weeks\n    const visibleCandles = candles.filter(c => c.time >= timeAgo);\n\n    // Format and deduplicate candles by timestamp\n    const candleMap = new Map<number, any>();\n    \n    visibleCandles.forEach(candle => {\n      const timestamp = Math.floor(candle.time / 1000);\n      \n      // Only keep the latest candle for each timestamp\n      if (!candleMap.has(timestamp) || candle.time > (candleMap.get(timestamp).originalTime || 0)) {\n        candleMap.set(timestamp, {\n          time: timestamp,\n          open: candle.open,\n          high: candle.high,\n          low: candle.low,\n          close: candle.close,\n          originalTime: candle.time,\n        });\n      }\n    });\n\n    // Convert to array and sort by time (ascending)\n    const formattedCandles = Array.from(candleMap.values())\n      .sort((a, b) => a.time - b.time)\n      .map(({ originalTime, ...candle }) => candle); // Remove originalTime before setting\n\n    try {\n      candlestickSeriesRef.current.setData(formattedCandles);\n    } catch (error) {\n      console.error('Error setting candle data:', error);\n      // If there's still an error, try clearing and re-adding\n      candlestickSeriesRef.current.setData([]);\n      setTimeout(() => {\n        if (candlestickSeriesRef.current) {\n          candlestickSeriesRef.current.setData(formattedCandles);\n        }\n      }, 100);\n    }\n  }, [candles]);\n\n  // Add signal markers (Buy/Sell labels) - DISPLAY LAST 3 WEEKS\n  useEffect(() => {\n    if (!candlestickSeriesRef.current || signals.length === 0) return;\n\n    // Filter signals to match visible timeframe (3 weeks)\n    const now = Date.now();\n    const timeAgo = now - (21 * 24 * 60 * 60 * 1000); // 3 weeks\n    const visibleSignals = signals.filter(s => s.time >= timeAgo);\n\n    const markers = visibleSignals.map(signal => ({\n      time: Math.floor(signal.time / 1000) as any,\n      position: signal.type === 'buy' ? 'belowBar' : 'aboveBar' as any,\n      color: signal.type === 'buy' ? '#22c55e' : '#ef4444',\n      shape: 'arrowUp' as any, // Use arrowUp for both (will be rotated by position)\n      text: signal.type === 'buy' ? 'Buy' : 'Sell',\n      size: 1,\n    }));\n\n    candlestickSeriesRef.current.setMarkers(markers);\n  }, [signals]);\n\n  // Add Camarilla pivot lines\n  useEffect(() => {\n    if (!chartRef.current || !pivots) return;\n\n    // Remove old pivot lines\n    pivotLinesRef.current.forEach(line => {\n      try {\n        chartRef.current?.removeSeries(line);\n      } catch (e) {\n        // Line already removed\n      }\n    });\n    pivotLinesRef.current = [];\n\n    // Get visible timeframe for line span\n    const now = Date.now();\n    const timeAgo = now - (21 * 24 * 60 * 60 * 1000); // 3 weeks\n    const visibleCandles = candles.filter(c => c.time >= timeAgo);\n\n    if (visibleCandles.length === 0) return;\n\n    // Daily levels with proper colors\n    const levels = [\n      // Resistance levels (orange - #e05d29)\n      { price: pivots.h5, color: '#e05d29', label: 'H5', lineWidth: 2 },\n      { price: pivots.r4, color: '#e05d29', label: 'H4', lineWidth: 2 },\n      { price: pivots.r3, color: '#e05d29', label: 'H3', lineWidth: 2 },\n      { price: pivots.r2, color: '#e05d29', label: 'H2', lineWidth: 2 },\n      { price: pivots.r1, color: '#e05d29', label: 'H1', lineWidth: 2 },\n      \n      // Center (white - #e4e3e7)\n      { price: pivots.center, color: '#e4e3e7', label: 'Center', lineWidth: 2 },\n      \n      // Support levels (teal - #008080)\n      { price: pivots.s1, color: '#008080', label: 'L1', lineWidth: 2 },\n      { price: pivots.s2, color: '#008080', label: 'L2', lineWidth: 2 },\n      { price: pivots.s3, color: '#008080', label: 'L3', lineWidth: 2 },\n      { price: pivots.s4, color: '#008080', label: 'L4', lineWidth: 2 },\n      { price: pivots.l5, color: '#008080', label: 'L5', lineWidth: 2 },\n    ];\n\n    // Weekly levels (cyan - rgb(64, 215, 235))\n    if (pivots.weeklyCenter !== undefined) {\n      levels.push(\n        { price: pivots.weeklyCenter, color: 'rgb(64, 215, 235)', label: 'WCenter', lineWidth: 1 },\n        { price: pivots.weekly_h3!, color: 'rgb(64, 215, 235)', label: 'WH3', lineWidth: 1 },\n        { price: pivots.weekly_l3!, color: 'rgb(64, 215, 235)', label: 'WL3', lineWidth: 1 }\n      );\n    }\n\n    // Monthly levels (light green - #8cfcc4)\n    if (pivots.monthlyCenter !== undefined) {\n      levels.push(\n        { price: pivots.monthlyCenter, color: '#8cfcc4', label: 'MCenter', lineWidth: 1 },\n        { price: pivots.monthly_h3!, color: '#8cfcc4', label: 'MH3', lineWidth: 1 },\n        { price: pivots.monthly_h4!, color: '#8cfcc4', label: 'MH4', lineWidth: 1 },\n        { price: pivots.monthly_l3!, color: '#8cfcc4', label: 'ML3', lineWidth: 1 },\n        { price: pivots.monthly_l4!, color: '#8cfcc4', label: 'ML4', lineWidth: 1 }\n      );\n    }\n\n    levels.forEach(level => {\n      const lineSeries = chartRef.current!.addLineSeries({\n        color: level.color,\n        lineWidth: level.lineWidth,\n        lineStyle: 0, // Solid line\n        priceLineVisible: true,\n        lastValueVisible: true,\n        title: level.label,\n      });\n\n      // Store reference to remove later\n      pivotLinesRef.current.push(lineSeries);\n\n      // Create horizontal line data spanning the visible range (3 weeks)\n      const lineData = [\n        { time: Math.floor(visibleCandles[0].time / 1000) as any, value: level.price },\n        { time: Math.floor(visibleCandles[visibleCandles.length - 1].time / 1000) as any, value: level.price },\n      ];\n      lineSeries.setData(lineData);\n    });\n  }, [pivots, candles]);\n\n  return (\n    <div className=\"relative\">\n      <div ref={chartContainerRef} className=\"rounded-lg overflow-hidden border border-gray-800\" />\n      \n      {/* Current Price Overlay */}\n      {currentPrice > 0 && (\n        <div className=\"absolute top-4 left-4 bg-black/80 backdrop-blur-sm px-4 py-2 rounded-lg border border-gray-700\">\n          <div className=\"text-xs text-gray-400\">BTC/USDT</div>\n          <div className=\"text-2xl font-bold text-white\">${currentPrice.toFixed(2)}</div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/components/CombinedSignalAlerts.tsx"],"sourcesContent":["\"use client\";\n\nimport { UCSSignal, Alert } from '../types';\n\ninterface CombinedSignalAlertsProps {\n  latestSignal: UCSSignal | null;\n  currentPrice: number;\n  alerts: Alert[];\n}\n\nexport function CombinedSignalAlerts({ latestSignal, currentPrice, alerts }: CombinedSignalAlertsProps) {\n  const isRecent = latestSignal && Date.now() - latestSignal.time < 5 * 60 * 1000; // 5 minutes\n  const priceDiff = latestSignal ? currentPrice - latestSignal.price : 0;\n  const priceDiffPercent = latestSignal ? (priceDiff / latestSignal.price) * 100 : 0;\n\n  const signalColor = latestSignal?.type === 'buy' ? 'text-green-400' : 'text-red-400';\n  const bgColor = latestSignal?.type === 'buy' \n    ? 'bg-green-500/10 border-green-500/30' \n    : 'bg-red-500/10 border-red-500/30';\n\n  const probabilityColor = latestSignal ? {\n    high: 'text-green-400 bg-green-500/20',\n    mid: 'text-yellow-400 bg-yellow-500/20',\n    low: 'text-orange-400 bg-orange-500/20',\n  }[latestSignal.probability] : '';\n\n  return (\n    <div className=\"bg-gray-900 rounded-xl border border-gray-700 overflow-hidden\">\n      {/* Current Signal Section */}\n      <div className={`p-6 border-b border-gray-700 ${latestSignal ? bgColor : ''}`}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-300\">Current Signal</h3>\n          {isRecent && (\n            <span className=\"px-2 py-1 text-xs font-medium bg-blue-500/20 text-blue-400 rounded-full animate-pulse\">\n              Active\n            </span>\n          )}\n        </div>\n\n        {!latestSignal ? (\n          <div className=\"text-center py-6\">\n            <div className=\"text-gray-500 text-sm\">No active signals</div>\n            <div className=\"text-xs text-gray-600 mt-2\">Waiting for reversal setup...</div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-2 gap-4\">\n            {/* Direction */}\n            <div className=\"col-span-2\">\n              <div className=\"text-xs text-gray-500 mb-1\">Direction</div>\n              <div className={`text-2xl font-bold ${signalColor} uppercase`}>\n                {latestSignal.type === 'buy' ? '↗ Buy' : '↘ Sell'}\n              </div>\n            </div>\n\n            {/* Confidence */}\n            <div className=\"col-span-2\">\n              <div className=\"text-xs text-gray-500 mb-2\">Confidence</div>\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex-1 bg-gray-700 rounded-full h-2 overflow-hidden\">\n                  <div \n                    className={`h-full ${latestSignal.type === 'buy' ? 'bg-green-500' : 'bg-red-500'} transition-all duration-500`}\n                    style={{ width: `${latestSignal.confidence}%` }}\n                  />\n                </div>\n                <span className=\"text-lg font-bold text-white\">{latestSignal.confidence}%</span>\n              </div>\n            </div>\n\n            {/* Probability & Price */}\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1\">Probability</div>\n              <span className={`px-2 py-1 rounded text-xs font-medium ${probabilityColor}`}>\n                {latestSignal.probability.toUpperCase()}\n              </span>\n            </div>\n\n            <div>\n              <div className=\"text-xs text-gray-500 mb-1\">Signal Price</div>\n              <div className=\"text-sm font-mono text-white\">${latestSignal.price.toFixed(2)}</div>\n            </div>\n\n            {/* Price Movement */}\n            {currentPrice > 0 && (\n              <div className=\"col-span-2\">\n                <div className=\"text-xs text-gray-500 mb-1\">Movement</div>\n                <div className={`text-base font-mono ${priceDiff >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n                  {priceDiff >= 0 ? '+' : ''}{priceDiff.toFixed(2)} ({priceDiffPercent.toFixed(2)}%)\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Recent Alerts Section */}\n      <div className=\"p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-300 mb-4\">\n          Recent Alerts <span className=\"text-gray-500 text-sm\">({alerts.length})</span>\n        </h3>\n        \n        {alerts.length === 0 ? (\n          <div className=\"text-center py-6\">\n            <div className=\"text-gray-500 text-sm\">No alerts yet</div>\n          </div>\n        ) : (\n          <div className=\"space-y-2 max-h-[300px] overflow-y-auto custom-scrollbar\">\n            {alerts.slice(0, 5).map((alert) => {\n              const isWin = alert.outcome === 'win';\n              const isLoss = alert.outcome === 'loss';\n              const isPending = alert.outcome === 'pending' || !alert.outcome;\n\n              const directionColor = alert.direction === 'up' ? 'text-green-400' : 'text-red-400';\n              const directionBg = alert.direction === 'up' ? 'bg-green-500/5' : 'bg-red-500/5';\n              const directionIcon = alert.direction === 'up' ? '↗' : '↘';\n\n              const outcomeColor = isWin ? 'text-green-400' : isLoss ? 'text-red-400' : 'text-gray-400';\n              const outcomeLabel = isWin ? '✓' : isLoss ? '✗' : '⋯';\n\n              return (\n                <div\n                  key={alert.id}\n                  className={`p-3 rounded-lg border ${directionBg} border-gray-700 hover:border-gray-600 transition-colors`}\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className={`text-lg ${directionColor}`}>{directionIcon}</span>\n                      <span className={`font-semibold ${directionColor} uppercase text-sm`}>\n                        {alert.direction}\n                      </span>\n                      <span className=\"text-xs text-gray-500 uppercase\">\n                        {alert.probability}\n                      </span>\n                    </div>\n                    <span className={`text-sm font-medium ${outcomeColor}`}>\n                      {outcomeLabel}\n                    </span>\n                  </div>\n\n                  <div className=\"grid grid-cols-3 gap-2 text-xs\">\n                    <div>\n                      <div className=\"text-gray-500\">Price</div>\n                      <div className=\"font-mono text-white\">${alert.price.toFixed(2)}</div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-500\">Conf.</div>\n                      <div className=\"font-semibold text-white\">{alert.confidence}%</div>\n                    </div>\n                    <div>\n                      <div className=\"text-gray-500\">Time</div>\n                      <div className=\"text-gray-400\">\n                        {new Date(alert.timestamp).toLocaleTimeString([], { \n                          hour: '2-digit', \n                          minute: '2-digit' \n                        })}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 870, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 876, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/lib/store.ts"],"sourcesContent":["// BTC Dashboard State Store\n\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\nimport { Candle, UCSSignal, CamarillaPivots, Alert, DashboardConfig } from '../types';\n\ninterface BTCDashboardStore {\n  // Price & Chart Data\n  currentPrice: number;\n  candles: Candle[];\n  \n  // Signals & Indicators\n  activeSignals: UCSSignal[];\n  pivots: CamarillaPivots | null;\n  \n  // Alerts\n  alerts: Alert[];\n  \n  // Configuration\n  config: DashboardConfig;\n  \n  // Actions\n  setCurrentPrice: (price: number) => void;\n  addCandle: (candle: Candle) => void;\n  setCandles: (candles: Candle[]) => void;\n  addSignal: (signal: UCSSignal) => void;\n  setPivots: (pivots: CamarillaPivots) => void;\n  addAlert: (alert: Alert) => void;\n  updateAlert: (id: string, update: Partial<Alert>) => void;\n  updateConfig: (config: Partial<DashboardConfig>) => void;\n  clearAlerts: () => void;\n}\n\nexport const useBTCStore = create<BTCDashboardStore>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      currentPrice: 0,\n      candles: [],\n      activeSignals: [],\n      pivots: null,\n      alerts: [],\n      config: {\n        discordWebhook: '',\n        enableHighProb: true,\n        enableMidProb: false,\n        enableLowProb: false,\n        alertThreshold: 75,\n        timeframe: '1m',\n      },\n\n      // Actions\n      setCurrentPrice: (price) => set({ currentPrice: price }),\n      \n      addCandle: (candle) => set((state) => {\n        // Check if candle with same timestamp already exists\n        const existingIndex = state.candles.findIndex(c => c.time === candle.time);\n        \n        if (existingIndex !== -1) {\n          // Update existing candle instead of adding duplicate\n          const updatedCandles = [...state.candles];\n          updatedCandles[existingIndex] = candle;\n          return { candles: updatedCandles.slice(-30240) }; // Keep last 3 weeks\n        }\n        \n        // Add new candle\n        return { candles: [...state.candles.slice(-30240), candle] }; // Keep last 3 weeks\n      }),\n      \n      setCandles: (candles) => set({ candles }),\n      \n      addSignal: (signal) => set((state) => ({\n        activeSignals: [...state.activeSignals.slice(-50), signal]\n      })),\n      \n      setPivots: (pivots) => set({ pivots }),\n      \n      addAlert: (alert) => set((state) => ({\n        alerts: [alert, ...state.alerts.slice(0, 99)] // Keep last 100 alerts\n      })),\n      \n      updateAlert: (id, update) => set((state) => ({\n        alerts: state.alerts.map(alert =>\n          alert.id === id ? { ...alert, ...update } : alert\n        )\n      })),\n      \n      updateConfig: (config) => set((state) => ({\n        config: { ...state.config, ...config }\n      })),\n      \n      clearAlerts: () => set({ alerts: [] }),\n    }),\n    {\n      name: 'btc-dashboard-storage',\n      partialize: (state) => ({\n        alerts: state.alerts,\n        config: state.config,\n      }),\n    }\n  )\n);"],"names":[],"mappings":"AAAA,4BAA4B;;;;AAE5B;AACA;;;AA8BO,MAAM,cAAc,CAAA,GAAA,2IAAA,CAAA,SAAM,AAAD,IAC9B,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD,EACJ,CAAC,KAAK,MAAQ,CAAC;QACb,gBAAgB;QAChB,cAAc;QACd,SAAS,EAAE;QACX,eAAe,EAAE;QACjB,QAAQ;QACR,QAAQ,EAAE;QACV,QAAQ;YACN,gBAAgB;YAChB,gBAAgB;YAChB,eAAe;YACf,eAAe;YACf,gBAAgB;YAChB,WAAW;QACb;QAEA,UAAU;QACV,iBAAiB,CAAC,QAAU,IAAI;gBAAE,cAAc;YAAM;QAEtD,WAAW,CAAC,SAAW,IAAI,CAAC;gBAC1B,qDAAqD;gBACrD,MAAM,gBAAgB,MAAM,OAAO,CAAC,SAAS,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,OAAO,IAAI;gBAEzE,IAAI,kBAAkB,CAAC,GAAG;oBACxB,qDAAqD;oBACrD,MAAM,iBAAiB;2BAAI,MAAM,OAAO;qBAAC;oBACzC,cAAc,CAAC,cAAc,GAAG;oBAChC,OAAO;wBAAE,SAAS,eAAe,KAAK,CAAC,CAAC;oBAAO,GAAG,oBAAoB;gBACxE;gBAEA,iBAAiB;gBACjB,OAAO;oBAAE,SAAS;2BAAI,MAAM,OAAO,CAAC,KAAK,CAAC,CAAC;wBAAQ;qBAAO;gBAAC,GAAG,oBAAoB;YACpF;QAEA,YAAY,CAAC,UAAY,IAAI;gBAAE;YAAQ;QAEvC,WAAW,CAAC,SAAW,IAAI,CAAC,QAAU,CAAC;oBACrC,eAAe;2BAAI,MAAM,aAAa,CAAC,KAAK,CAAC,CAAC;wBAAK;qBAAO;gBAC5D,CAAC;QAED,WAAW,CAAC,SAAW,IAAI;gBAAE;YAAO;QAEpC,UAAU,CAAC,QAAU,IAAI,CAAC,QAAU,CAAC;oBACnC,QAAQ;wBAAC;2BAAU,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG;qBAAI,CAAC,uBAAuB;gBACvE,CAAC;QAED,aAAa,CAAC,IAAI,SAAW,IAAI,CAAC,QAAU,CAAC;oBAC3C,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAA,QACvB,MAAM,EAAE,KAAK,KAAK;4BAAE,GAAG,KAAK;4BAAE,GAAG,MAAM;wBAAC,IAAI;gBAEhD,CAAC;QAED,cAAc,CAAC,SAAW,IAAI,CAAC,QAAU,CAAC;oBACxC,QAAQ;wBAAE,GAAG,MAAM,MAAM;wBAAE,GAAG,MAAM;oBAAC;gBACvC,CAAC;QAED,aAAa,IAAM,IAAI;gBAAE,QAAQ,EAAE;YAAC;IACtC,CAAC,GACD;IACE,MAAM;IACN,YAAY,CAAC,QAAU,CAAC;YACtB,QAAQ,MAAM,MAAM;YACpB,QAAQ,MAAM,MAAM;QACtB,CAAC;AACH"}},
    {"offset": {"line": 967, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 973, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/components/SettingsPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useBTCStore } from '../lib/store';\n\nexport function SettingsPanel() {\n  const { config, updateConfig } = useBTCStore();\n  const [webhookInput, setWebhookInput] = useState(config.discordWebhook);\n  const [showSuccess, setShowSuccess] = useState(false);\n\n  const handleSaveWebhook = () => {\n    updateConfig({ discordWebhook: webhookInput });\n    setShowSuccess(true);\n    setTimeout(() => setShowSuccess(false), 3000);\n  };\n\n  const handleToggle = (key: keyof typeof config, value: boolean) => {\n    updateConfig({ [key]: value });\n  };\n\n  return (\n    <div className=\"bg-gray-900 rounded-xl p-6 border border-gray-700\">\n      <h3 className=\"text-lg font-semibold text-gray-300 mb-4\">Settings</h3>\n\n      {/* Discord Webhook - Compact */}\n      <div className=\"mb-4\">\n        <label className=\"block text-xs font-medium text-gray-400 mb-2\">\n          Discord Webhook URL\n        </label>\n        <div className=\"flex gap-2\">\n          <input\n            type=\"text\"\n            value={webhookInput}\n            onChange={(e) => setWebhookInput(e.target.value)}\n            placeholder=\"https://discord.com/api/webhooks/...\"\n            className=\"flex-1 px-3 py-2 text-sm bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          />\n          <button\n            onClick={handleSaveWebhook}\n            className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors\"\n          >\n            Save\n          </button>\n        </div>\n        {showSuccess && (\n          <div className=\"mt-2 text-xs text-green-400 flex items-center gap-2\">\n            <span>✓</span>\n            <span>Saved!</span>\n          </div>\n        )}\n      </div>\n\n      {/* Signal Probability Toggles - Compact */}\n      <div className=\"space-y-2 mb-4\">\n        <div className=\"text-xs font-medium text-gray-400 mb-2\">\n          Signal Types\n        </div>\n\n        {/* High Probability */}\n        <label className=\"flex items-center justify-between p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n            <div className=\"text-sm font-medium text-white\">High (95%)</div>\n          </div>\n          <input\n            type=\"checkbox\"\n            checked={config.enableHighProb}\n            onChange={(e) => handleToggle('enableHighProb', e.target.checked)}\n            className=\"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-2 focus:ring-blue-500\"\n          />\n        </label>\n\n        {/* Mid Probability */}\n        <label className=\"flex items-center justify-between p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n            <div className=\"text-sm font-medium text-white\">Mid (75%)</div>\n          </div>\n          <input\n            type=\"checkbox\"\n            checked={config.enableMidProb}\n            onChange={(e) => handleToggle('enableMidProb', e.target.checked)}\n            className=\"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-2 focus:ring-blue-500\"\n          />\n        </label>\n\n        {/* Low Probability */}\n        <label className=\"flex items-center justify-between p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\n            <div className=\"text-sm font-medium text-white\">Low (55%)</div>\n          </div>\n          <input\n            type=\"checkbox\"\n            checked={config.enableLowProb}\n            onChange={(e) => handleToggle('enableLowProb', e.target.checked)}\n            className=\"w-4 h-4 text-blue-600 bg-gray-700 border-gray-600 rounded focus:ring-2 focus:ring-blue-500\"\n          />\n        </label>\n      </div>\n\n      {/* Alert Threshold - Compact */}\n      <div>\n        <label className=\"flex items-center justify-between text-xs font-medium text-gray-400 mb-2\">\n          <span>Alert Threshold</span>\n          <span className=\"text-white\">{config.alertThreshold}%</span>\n        </label>\n        <input\n          type=\"range\"\n          min=\"50\"\n          max=\"100\"\n          step=\"5\"\n          value={config.alertThreshold}\n          onChange={(e) => updateConfig({ alertThreshold: parseInt(e.target.value) })}\n          className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600\"\n        />\n      </div>\n\n      {/* Timeframe Selector */}\n      <div className=\"mt-4\">\n        <div className=\"text-xs font-medium text-gray-400 mb-2\">Chart Timeframe</div>\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => updateConfig({ timeframe: '1m' })}\n            className={`flex-1 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${\n              config.timeframe === '1m'\n                ? 'bg-blue-600 text-white'\n                : 'bg-gray-800 text-gray-400 hover:bg-gray-750'\n            }`}\n          >\n            1m\n          </button>\n          <button\n            onClick={() => updateConfig({ timeframe: '15m' })}\n            className={`flex-1 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${\n              config.timeframe === '15m'\n                ? 'bg-blue-600 text-white'\n                : 'bg-gray-800 text-gray-400 hover:bg-gray-750'\n            }`}\n          >\n            15m\n          </button>\n          <button\n            onClick={() => updateConfig({ timeframe: '45m' })}\n            className={`flex-1 px-3 py-2 text-sm font-medium rounded-lg transition-colors ${\n              config.timeframe === '45m'\n                ? 'bg-blue-600 text-white'\n                : 'bg-gray-800 text-gray-400 hover:bg-gray-750'\n            }`}\n          >\n            45m\n          </button>\n        </div>\n      </div>\n\n      {/* Status - Compact */}\n      <div className=\"mt-4 p-3 bg-gray-800 rounded-lg border border-gray-700\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-xs text-gray-400\">\n            {config.discordWebhook ? 'Discord connected' : 'No webhook'}\n          </div>\n          <div className={`w-2 h-2 rounded-full ${\n            config.discordWebhook ? 'bg-green-500 animate-pulse' : 'bg-gray-600'\n          }`} />\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1385, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1391, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/components/PerformanceMetrics.tsx"],"sourcesContent":["\"use client\";\n\nimport { Alert } from '../types';\n\ninterface PerformanceMetricsProps {\n  alerts: Alert[];\n}\n\nexport function PerformanceMetrics({ alerts }: PerformanceMetricsProps) {\n  const totalAlerts = alerts.length;\n  const completedAlerts = alerts.filter(a => a.outcome === 'win' || a.outcome === 'loss');\n  const wins = alerts.filter(a => a.outcome === 'win').length;\n  const losses = alerts.filter(a => a.outcome === 'loss').length;\n  const pending = totalAlerts - completedAlerts.length;\n\n  const winRate = completedAlerts.length > 0 \n    ? ((wins / completedAlerts.length) * 100).toFixed(1)\n    : '0.0';\n\n  // Calculate by probability level\n  const highProbAlerts = alerts.filter(a => a.probability === 'high');\n  const midProbAlerts = alerts.filter(a => a.probability === 'mid');\n  const lowProbAlerts = alerts.filter(a => a.probability === 'low');\n\n  const calculateStats = (alerts: Alert[]) => {\n    const completed = alerts.filter(a => a.outcome === 'win' || a.outcome === 'loss');\n    const wins = alerts.filter(a => a.outcome === 'win').length;\n    return {\n      total: alerts.length,\n      wins,\n      winRate: completed.length > 0 ? ((wins / completed.length) * 100).toFixed(1) : '0.0'\n    };\n  };\n\n  const highStats = calculateStats(highProbAlerts);\n  const midStats = calculateStats(midProbAlerts);\n  const lowStats = calculateStats(lowProbAlerts);\n\n  return (\n    <div className=\"bg-gray-900 rounded-xl p-6 border border-gray-700\">\n      <h3 className=\"text-lg font-semibold text-gray-300 mb-4\">Performance Metrics</h3>\n\n      {/* Overall Stats - Compact Grid */}\n      <div className=\"grid grid-cols-4 gap-3 mb-4\">\n        <div className=\"bg-gray-800 rounded-lg p-3\">\n          <div className=\"text-xs text-gray-500 mb-1\">Total</div>\n          <div className=\"text-xl font-bold text-white\">{totalAlerts}</div>\n        </div>\n        <div className=\"bg-green-500/10 border border-green-500/30 rounded-lg p-3\">\n          <div className=\"text-xs text-gray-500 mb-1\">Wins</div>\n          <div className=\"text-xl font-bold text-green-400\">{wins}</div>\n        </div>\n        <div className=\"bg-red-500/10 border border-red-500/30 rounded-lg p-3\">\n          <div className=\"text-xs text-gray-500 mb-1\">Loss</div>\n          <div className=\"text-xl font-bold text-red-400\">{losses}</div>\n        </div>\n        <div className=\"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3\">\n          <div className=\"text-xs text-gray-500 mb-1\">Rate</div>\n          <div className=\"text-xl font-bold text-blue-400\">{winRate}%</div>\n        </div>\n      </div>\n\n      {/* Win Rate Progress */}\n      <div className=\"mb-4\">\n        <div className=\"flex items-center justify-between text-sm mb-2\">\n          <span className=\"text-gray-400\">Win Rate</span>\n          <span className=\"text-white font-semibold\">{winRate}%</span>\n        </div>\n        <div className=\"w-full bg-gray-700 rounded-full h-2 overflow-hidden\">\n          <div \n            className=\"bg-gradient-to-r from-green-500 to-blue-500 h-full transition-all duration-500\"\n            style={{ width: `${Math.min(parseFloat(winRate), 100)}%` }}\n          />\n        </div>\n      </div>\n\n      {/* Stats by Probability Level - Compact */}\n      <div className=\"space-y-2\">\n        <div className=\"text-xs font-medium text-gray-400 mb-2\">By Probability</div>\n        \n        {/* High Probability */}\n        <div className=\"flex items-center justify-between bg-gray-800 rounded p-2\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n            <span className=\"text-xs font-medium text-green-400\">High</span>\n            <span className=\"text-xs text-gray-500\">{highStats.total}</span>\n          </div>\n          <span className=\"text-xs font-semibold text-white\">{highStats.winRate}%</span>\n        </div>\n\n        {/* Mid Probability */}\n        <div className=\"flex items-center justify-between bg-gray-800 rounded p-2\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n            <span className=\"text-xs font-medium text-yellow-400\">Mid</span>\n            <span className=\"text-xs text-gray-500\">{midStats.total}</span>\n          </div>\n          <span className=\"text-xs font-semibold text-white\">{midStats.winRate}%</span>\n        </div>\n\n        {/* Low Probability */}\n        <div className=\"flex items-center justify-between bg-gray-800 rounded p-2\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-orange-500 rounded-full\"></div>\n            <span className=\"text-xs font-medium text-orange-400\">Low</span>\n            <span className=\"text-xs text-gray-500\">{lowStats.total}</span>\n          </div>\n          <span className=\"text-xs font-semibold text-white\">{lowStats.winRate}%</span>\n        </div>\n      </div>\n\n      {/* Pending Alerts Notice */}\n      {pending > 0 && (\n        <div className=\"mt-3 p-2 bg-blue-500/10 border border-blue-500/30 rounded text-center\">\n          <div className=\"text-xs text-blue-400\">\n            {pending} pending\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1801, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1807, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/hooks/useBTCPrice.ts"],"sourcesContent":["// Custom hook for real-time BTC price data\n\nimport { useEffect, useRef } from 'react';\nimport { useBTCStore } from '../lib/store';\nimport { Candle } from '../types';\n\n// Binance WebSocket for 1-minute candles\nexport function useBTCPriceStream() {\n  const wsRef = useRef<WebSocket | null>(null);\n  const { addCandle, setCurrentPrice } = useBTCStore();\n\n  useEffect(() => {\n    // Connect to Binance WebSocket for BTC/USDT 1-minute klines\n    const ws = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@kline_1m');\n    wsRef.current = ws;\n\n    ws.onopen = () => {\n      console.log('✅ Connected to Binance WebSocket');\n    };\n\n    ws.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n        \n        if (data.e === 'kline') {\n          const kline = data.k;\n          \n          // Update current price continuously\n          const currentClose = parseFloat(kline.c);\n          setCurrentPrice(currentClose);\n\n          // Only add candle when it's closed (x = true)\n          if (kline.x) {\n            const candle: Candle = {\n              time: kline.t,\n              open: parseFloat(kline.o),\n              high: parseFloat(kline.h),\n              low: parseFloat(kline.l),\n              close: parseFloat(kline.c),\n              volume: parseFloat(kline.v),\n            };\n            \n            addCandle(candle);\n          }\n        }\n      } catch (error) {\n        console.error('Error parsing WebSocket data:', error);\n      }\n    };\n\n    ws.onerror = (error) => {\n      console.error('WebSocket error:', error);\n    };\n\n    ws.onclose = () => {\n      console.log('WebSocket disconnected. Reconnecting...');\n      // Reconnect after 3 seconds\n      setTimeout(() => {\n        if (wsRef.current?.readyState === WebSocket.CLOSED) {\n          window.location.reload(); // Simple reconnect strategy\n        }\n      }, 3000);\n    };\n\n    return () => {\n      if (ws.readyState === WebSocket.OPEN) {\n        ws.close();\n      }\n    };\n  }, [addCandle, setCurrentPrice]);\n}\n\n// Fetch historical candles from Binance API\nexport async function fetchHistoricalCandles(\n  limit: number = 1000\n): Promise<Candle[]> {\n  try {\n    // Binance API max limit is 1000, so we need multiple calls for 3 weeks (30,240 candles)\n    const allCandles: Candle[] = [];\n    const maxLimit = 1000;\n    const totalCandles = 30240; // 21 days * 24 hours * 60 minutes (3 weeks)\n    const calls = Math.ceil(totalCandles / maxLimit);\n    \n    let endTime = Date.now();\n    \n    for (let i = 0; i < calls; i++) {\n      const response = await fetch(\n        `https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1m&limit=${maxLimit}&endTime=${endTime}`\n      );\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch historical data');\n      }\n\n      const data = await response.json();\n      \n      const candles = data.map((kline: any) => ({\n        time: kline[0],\n        open: parseFloat(kline[1]),\n        high: parseFloat(kline[2]),\n        low: parseFloat(kline[3]),\n        close: parseFloat(kline[4]),\n        volume: parseFloat(kline[5]),\n      }));\n      \n      allCandles.unshift(...candles);\n      \n      // Set endTime to the earliest candle's time for next call\n      if (candles.length > 0) {\n        endTime = candles[0].time - 1;\n      }\n      \n      // Break if we got less than requested (reached the end)\n      if (data.length < maxLimit) {\n        break;\n      }\n    }\n    \n    return allCandles.slice(-totalCandles); // Return last 3 weeks\n  } catch (error) {\n    console.error('Error fetching historical candles:', error);\n    return [];\n  }\n}\n\n// Alternative: Use CoinGecko for simple price (backup)\nexport async function fetchBTCPriceCoinGecko(): Promise<number | null> {\n  try {\n    const response = await fetch(\n      'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd'\n    );\n    const data = await response.json();\n    return data.bitcoin?.usd || null;\n  } catch (error) {\n    console.error('Error fetching BTC price from CoinGecko:', error);\n    return null;\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1946, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1952, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/lib/ucs-indicator.ts"],"sourcesContent":["// UCS_Extreme Snap Back Indicator (OPTIMIZED)\n// Converted from Pine Script v3\n\nimport { Candle, UCSSignal, IndicatorData } from '../types';\n\n// Simple Moving Average\nfunction sma(data: number[], period: number): number {\n  if (data.length < period) return data[data.length - 1] || 0;\n  const slice = data.slice(-period);\n  return slice.reduce((sum, val) => sum + val, 0) / period;\n}\n\n// True Range\nfunction trueRange(candle: Candle, prevClose: number): number {\n  const h_l = candle.high - candle.low;\n  const h_pc = Math.abs(candle.high - prevClose);\n  const l_pc = Math.abs(candle.low - prevClose);\n  return Math.max(h_l, h_pc, l_pc);\n}\n\n// OHLC4 calculation\nfunction ohlc4(candle: Candle): number {\n  return (candle.open + candle.high + candle.low + candle.close) / 4;\n}\n\nexport class UCSIndicator {\n  private len1 = 7;\n  private len2 = 14;\n  private len3 = 21;\n  private len4 = 32;\n\n  // Cache to avoid recalculating all signals every time\n  private lastProcessedTime: number = 0;\n  private cachedSignals: UCSSignal[] = [];\n\n  calculate(candles: Candle[], config: {\n    highProb: boolean;\n    midProb: boolean;\n    lowProb: boolean;\n  }): { signals: UCSSignal[]; indicators: IndicatorData | null } {\n    if (candles.length < this.len4) {\n      return { signals: [], indicators: null };\n    }\n\n    // Only process NEW candles since last time\n    const newCandles = candles.filter(c => c.time > this.lastProcessedTime);\n    \n    if (newCandles.length > 0) {\n      // Process each new candle\n      for (let i = 0; i < newCandles.length; i++) {\n        const currentCandleTime = newCandles[i].time;\n        const currentIndex = candles.findIndex(c => c.time === currentCandleTime);\n        \n        if (currentIndex < this.len4) continue;\n        \n        // Get window of last 100 candles for calculation (performance optimization)\n        const windowStart = Math.max(0, currentIndex - 99);\n        const windowCandles = candles.slice(windowStart, currentIndex + 1);\n        \n        // Build src and tr arrays\n        const srcHistory = windowCandles.map(c => ohlc4(c));\n        const trHistory = windowCandles.map((c, idx) => {\n          if (idx === 0) return c.high - c.low;\n          return trueRange(c, windowCandles[idx - 1].close);\n        });\n\n        // Calculate MAs\n        const ma1 = sma(srcHistory, this.len1);\n        const ma2 = sma(srcHistory, this.len2);\n\n        // Calculate ATR ranges\n        const rng1 = sma(trHistory, this.len1);\n        const rng2 = sma(trHistory, this.len2);\n        const rng3 = sma(trHistory, this.len3);\n\n        // Calculate bands\n        const up1 = ma1 + rng1 * 1.6;\n        const up2 = ma2 + rng2 * 2.4;\n        const up3 = ma2 + rng3 * 3.2;\n\n        const dn1 = ma1 - rng1 * 1.6;\n        const dn2 = ma2 - rng2 * 2.4;\n        const dn3 = ma2 - rng2 * 3.2;\n\n        const currentCandle = windowCandles[windowCandles.length - 1];\n        \n        // Check previous candle to avoid consecutive duplicates\n        let prevHigh = 0;\n        let prevLow = 0;\n        \n        if (currentIndex > 0) {\n          const prevCandle = candles[currentIndex - 1];\n          // Simplified check using last calculated values\n          const ERhigh3_prev = prevCandle.high > up1 && prevCandle.high > up2 && prevCandle.high > up3 ? 1 : 0;\n          const ERlow3_prev = prevCandle.low < dn1 && prevCandle.low < dn2 && prevCandle.low < dn3 ? 1 : 0;\n          prevHigh = ERhigh3_prev;\n          prevLow = ERlow3_prev;\n        }\n\n        // Check current candle conditions\n        const ERhigh1 = currentCandle.high > up1 ? 1 : 0;\n        const ERlow1 = currentCandle.low < dn1 ? 1 : 0;\n\n        const ERhigh2 = currentCandle.high > up1 && currentCandle.high > up2 ? 1 : 0;\n        const ERlow2 = currentCandle.low < dn1 && currentCandle.low < dn2 ? 1 : 0;\n\n        const ERhigh3 = currentCandle.high > up1 && currentCandle.high > up2 && currentCandle.high > up3 ? 1 : 0;\n        const ERlow3 = currentCandle.low < dn1 && currentCandle.low < dn2 && currentCandle.low < dn3 ? 1 : 0;\n\n        // Detect signals\n        const HiPERh = config.highProb && prevHigh !== 1 && ERhigh3 ? 1 : 0;\n        const HiPERl = config.highProb && prevLow !== 1 && ERlow3 ? 1 : 0;\n\n        const MiPERh = config.midProb && HiPERh === 0 && prevHigh !== 1 && ERhigh2 ? 1 : 0;\n        const MiPERl = config.midProb && HiPERl === 0 && prevLow !== 1 && ERlow2 ? 1 : 0;\n\n        const LoPERh = config.lowProb && HiPERh === 0 && MiPERh === 0 && prevHigh !== 1 && ERhigh1 ? 1 : 0;\n        const LoPERl = config.lowProb && HiPERl === 0 && MiPERl === 0 && prevLow !== 1 && ERlow1 ? 1 : 0;\n\n        // Add signals to cache\n        if (HiPERh === 1) {\n          this.cachedSignals.push({\n            time: currentCandle.time,\n            price: currentCandle.high,\n            type: 'sell',\n            probability: 'high',\n            confidence: 95\n          });\n        }\n        if (HiPERl === 1) {\n          this.cachedSignals.push({\n            time: currentCandle.time,\n            price: currentCandle.low,\n            type: 'buy',\n            probability: 'high',\n            confidence: 95\n          });\n        }\n        if (MiPERh === 1) {\n          this.cachedSignals.push({\n            time: currentCandle.time,\n            price: currentCandle.high,\n            type: 'sell',\n            probability: 'mid',\n            confidence: 75\n          });\n        }\n        if (MiPERl === 1) {\n          this.cachedSignals.push({\n            time: currentCandle.time,\n            price: currentCandle.low,\n            type: 'buy',\n            probability: 'mid',\n            confidence: 75\n          });\n        }\n        if (LoPERh === 1) {\n          this.cachedSignals.push({\n            time: currentCandle.time,\n            price: currentCandle.high,\n            type: 'sell',\n            probability: 'low',\n            confidence: 55\n          });\n        }\n        if (LoPERl === 1) {\n          this.cachedSignals.push({\n            time: currentCandle.time,\n            price: currentCandle.low,\n            type: 'buy',\n            probability: 'low',\n            confidence: 55\n          });\n        }\n      }\n      \n      // Update last processed time\n      if (newCandles.length > 0) {\n        this.lastProcessedTime = newCandles[newCandles.length - 1].time;\n      }\n    }\n\n    // Calculate indicator values for display (using last 100 candles for performance)\n    const recentCandles = candles.slice(-100);\n    const srcHistory = recentCandles.map(c => ohlc4(c));\n    const trHistory = recentCandles.map((c, i) => {\n      if (i === 0) return c.high - c.low;\n      return trueRange(c, recentCandles[i - 1].close);\n    });\n\n    const ma1 = sma(srcHistory, this.len1);\n    const ma2 = sma(srcHistory, this.len2);\n    const ma3 = sma(srcHistory, this.len3);\n    const ma4 = sma(srcHistory, this.len4);\n\n    const rng1 = sma(trHistory, this.len1);\n    const rng2 = sma(trHistory, this.len2);\n    const rng3 = sma(trHistory, this.len3);\n\n    const up1 = ma1 + rng1 * 1.6;\n    const up2 = ma2 + rng2 * 2.4;\n    const up3 = ma2 + rng3 * 3.2;\n\n    const dn1 = ma1 - rng1 * 1.6;\n    const dn2 = ma2 - rng2 * 2.4;\n    const dn3 = ma2 - rng2 * 3.2;\n\n    return {\n      signals: this.cachedSignals,\n      indicators: {\n        ma1, ma2, ma3, ma4,\n        up1, up2, up3,\n        dn1, dn2, dn3\n      }\n    };\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2147, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2153, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/lib/camarilla.ts"],"sourcesContent":["// Camarilla Pivot Points Calculator\n// Converted from Pine Script v4\n\nimport { Candle, CamarillaPivots } from '../types';\n\nexport interface CamarillaPivotsExtended extends CamarillaPivots {\n  h5: number;\n  l5: number;\n  center: number;\n  // Weekly pivots\n  weeklyCenter?: number;\n  weekly_h3?: number;\n  weekly_l3?: number;\n  // Monthly pivots\n  monthlyCenter?: number;\n  monthly_h3?: number;\n  monthly_l3?: number;\n  monthly_h4?: number;\n  monthly_l4?: number;\n}\n\nexport function calculateCamarillaPivots(\n  dailyCandle: Candle,\n  weeklyCandle?: Candle,\n  monthlyCandle?: Candle\n): CamarillaPivotsExtended {\n  const { high: shigh, low: slow, close: sclose, open: sopen } = dailyCandle;\n  \n  // Calculate range\n  const r = shigh - slow;\n\n  // Daily Camarilla Pivots (using previous day's data)\n  const center = sclose;\n  const h1 = sclose + r * (1.1 / 12);\n  const h2 = sclose + r * (1.1 / 6);\n  const h3 = sclose + r * (1.1 / 4);\n  const h4 = sclose + r * (1.1 / 2);\n  const h5 = (shigh / slow) * sclose;\n  \n  const l1 = sclose - r * (1.1 / 12);\n  const l2 = sclose - r * (1.1 / 6);\n  const l3 = sclose - r * (1.1 / 4);\n  const l4 = sclose - r * (1.1 / 2);\n  const l5 = sclose - (h5 - sclose);\n\n  const pivots: CamarillaPivotsExtended = {\n    r4: Number(h4.toFixed(2)),\n    r3: Number(h3.toFixed(2)),\n    r2: Number(h2.toFixed(2)),\n    r1: Number(h1.toFixed(2)),\n    pp: Number(center.toFixed(2)),\n    s1: Number(l1.toFixed(2)),\n    s2: Number(l2.toFixed(2)),\n    s3: Number(l3.toFixed(2)),\n    s4: Number(l4.toFixed(2)),\n    h5: Number(h5.toFixed(2)),\n    l5: Number(l5.toFixed(2)),\n    center: Number(center.toFixed(2)),\n  };\n\n  // Weekly pivots (if provided)\n  if (weeklyCandle) {\n    const { high: wh, low: wl, close: wc } = weeklyCandle;\n    const r1 = wh - wl;\n    pivots.weeklyCenter = Number(wc.toFixed(2));\n    pivots.weekly_h3 = Number((wc + r1 * (1.1 / 4)).toFixed(2));\n    pivots.weekly_l3 = Number((wc - r1 * (1.1 / 4)).toFixed(2));\n  }\n\n  // Monthly pivots (if provided)\n  if (monthlyCandle) {\n    const { high: mh, low: ml, close: mc } = monthlyCandle;\n    const Mr1 = mh - ml;\n    pivots.monthlyCenter = Number(mc.toFixed(2));\n    pivots.monthly_h3 = Number((mc + Mr1 * (1.1 / 4)).toFixed(2));\n    pivots.monthly_l3 = Number((mc - Mr1 * (1.1 / 4)).toFixed(2));\n    pivots.monthly_h4 = Number((mc + Mr1 * (1.1 / 2)).toFixed(2));\n    pivots.monthly_l4 = Number((mc - Mr1 * (1.1 / 2)).toFixed(2));\n  }\n\n  return pivots;\n}\n\n// Get daily candle from 1-minute candles (previous day's data)\nexport function getDailyCandle(candles: Candle[]): Candle | null {\n  if (candles.length === 0) return null;\n\n  const now = new Date();\n  \n  // Get yesterday's date in UTC (00:00:00 to 23:59:59 UTC)\n  const yesterday = new Date(Date.UTC(\n    now.getUTCFullYear(),\n    now.getUTCMonth(),\n    now.getUTCDate() - 1,\n    0, 0, 0, 0\n  ));\n  \n  const yesterdayEnd = new Date(Date.UTC(\n    now.getUTCFullYear(),\n    now.getUTCMonth(),\n    now.getUTCDate() - 1,\n    23, 59, 59, 999\n  ));\n\n  const yesterdayStartTime = yesterday.getTime();\n  const yesterdayEndTime = yesterdayEnd.getTime();\n\n  // Filter candles from yesterday (00:00 to 23:59 UTC)\n  const yesterdayCandles = candles.filter(\n    c => c.time >= yesterdayStartTime && c.time <= yesterdayEndTime\n  );\n\n  if (yesterdayCandles.length === 0) {\n    console.log('No candles found for yesterday UTC, using fallback');\n    // Fallback: use last complete 1440 candles (24 hours)\n    const last24h = candles.slice(-2880, -1440);\n    if (last24h.length === 0) return null;\n\n    const high = Math.max(...last24h.map(c => c.high));\n    const low = Math.min(...last24h.map(c => c.low));\n    const close = last24h[last24h.length - 1].close;\n    const open = last24h[0].open;\n\n    return { time: last24h[last24h.length - 1].time, open, high, low, close };\n  }\n\n  const high = Math.max(...yesterdayCandles.map(c => c.high));\n  const low = Math.min(...yesterdayCandles.map(c => c.low));\n  const close = yesterdayCandles[yesterdayCandles.length - 1].close;\n  const open = yesterdayCandles[0].open;\n\n  console.log('Daily Candle (UTC Yesterday):', { open, high, low, close, candleCount: yesterdayCandles.length });\n\n  return {\n    time: yesterdayCandles[yesterdayCandles.length - 1].time,\n    open,\n    high,\n    low,\n    close\n  };\n}\n\n// Get weekly candle (previous week's data)\nexport function getWeeklyCandle(candles: Candle[]): Candle | null {\n  if (candles.length === 0) return null;\n\n  const now = new Date();\n  \n  // Get last week's Monday 00:00:00\n  const lastWeekMonday = new Date(now);\n  const dayOfWeek = now.getDay();\n  const daysToSubtract = dayOfWeek === 0 ? 13 : (dayOfWeek + 6); // If Sunday, go back 13 days, else current day + 6\n  lastWeekMonday.setDate(now.getDate() - daysToSubtract);\n  lastWeekMonday.setHours(0, 0, 0, 0);\n  \n  // Get last week's Sunday 23:59:59\n  const lastWeekSunday = new Date(lastWeekMonday);\n  lastWeekSunday.setDate(lastWeekMonday.getDate() + 6);\n  lastWeekSunday.setHours(23, 59, 59, 999);\n\n  const weekStartTime = lastWeekMonday.getTime();\n  const weekEndTime = lastWeekSunday.getTime();\n\n  const weekCandles = candles.filter(\n    c => c.time >= weekStartTime && c.time <= weekEndTime\n  );\n\n  if (weekCandles.length === 0) {\n    console.log('No candles found for last week');\n    return null;\n  }\n\n  const high = Math.max(...weekCandles.map(c => c.high));\n  const low = Math.min(...weekCandles.map(c => c.low));\n  const close = weekCandles[weekCandles.length - 1].close;\n  const open = weekCandles[0].open;\n\n  return {\n    time: weekCandles[weekCandles.length - 1].time,\n    open,\n    high,\n    low,\n    close\n  };\n}\n\n// Get monthly candle (previous month's data)\nexport function getMonthlyCandle(candles: Candle[]): Candle | null {\n  if (candles.length === 0) return null;\n\n  const now = new Date();\n  \n  // Get previous month (1st day at 00:00:00 to last day at 23:59:59)\n  const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, 1, 0, 0, 0, 0);\n  const lastMonthEnd = new Date(now.getFullYear(), now.getMonth(), 0, 23, 59, 59, 999);\n\n  const monthStartTime = lastMonth.getTime();\n  const monthEndTime = lastMonthEnd.getTime();\n\n  const monthCandles = candles.filter(c => {\n    return c.time >= monthStartTime && c.time <= monthEndTime;\n  });\n\n  if (monthCandles.length === 0) {\n    console.log('No candles found for last month');\n    return null;\n  }\n\n  const high = Math.max(...monthCandles.map(c => c.high));\n  const low = Math.min(...monthCandles.map(c => c.low));\n  const close = monthCandles[monthCandles.length - 1].close;\n  const open = monthCandles[0].open;\n\n  return {\n    time: monthCandles[monthCandles.length - 1].time,\n    open,\n    high,\n    low,\n    close\n  };\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2319, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2325, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/lib/discord.ts"],"sourcesContent":["// Discord Alert System\n\nimport { Alert } from '../types';\n\nexport async function sendDiscordAlert(\n  webhookUrl: string,\n  alert: Alert\n): Promise<boolean> {\n  if (!webhookUrl || !webhookUrl.startsWith('https://discord.com/api/webhooks/')) {\n    console.error('Invalid Discord webhook URL');\n    return false;\n  }\n\n  const directionEmoji = alert.direction === 'up' ? '🟢' : '🔴';\n  const probabilityLabel = alert.probability.toUpperCase();\n  const confidenceBar = '█'.repeat(Math.floor(alert.confidence / 10));\n\n  const embed = {\n    title: `${directionEmoji} BTC Reversal Signal - ${alert.direction.toUpperCase()}`,\n    description: `**${probabilityLabel} Probability Setup**`,\n    color: alert.direction === 'up' ? 0x00ff00 : 0xff0000,\n    fields: [\n      {\n        name: '💰 Price',\n        value: `$${alert.price.toFixed(2)}`,\n        inline: true,\n      },\n      {\n        name: '📊 Confidence',\n        value: `${alert.confidence}%\\n${confidenceBar}`,\n        inline: true,\n      },\n      {\n        name: '⏰ Time',\n        value: new Date(alert.timestamp).toLocaleString(),\n        inline: true,\n      },\n      {\n        name: '🎯 Direction',\n        value: alert.direction === 'up' ? 'BULLISH REVERSAL' : 'BEARISH REVERSAL',\n        inline: false,\n      },\n    ],\n    footer: {\n      text: 'UCS Extreme Snap Back | BTC Reversal System',\n    },\n    timestamp: new Date(alert.timestamp).toISOString(),\n  };\n\n  try {\n    const response = await fetch(webhookUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        username: 'BTC Reversal Bot',\n        avatar_url: 'https://cryptologos.cc/logos/bitcoin-btc-logo.png',\n        embeds: [embed],\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Discord webhook failed: ${response.statusText}`);\n    }\n\n    console.log('✅ Discord alert sent successfully');\n    return true;\n  } catch (error) {\n    console.error('❌ Failed to send Discord alert:', error);\n    return false;\n  }\n}\n\nexport function formatAlertMessage(alert: Alert): string {\n  const direction = alert.direction === 'up' ? 'BUY' : 'SELL';\n  const emoji = alert.direction === 'up' ? '🟢' : '🔴';\n  \n  return `${emoji} ${direction} Signal | $${alert.price.toFixed(2)} | ${alert.confidence}% confidence | ${alert.probability.toUpperCase()} prob`;\n}\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AAIhB,eAAe,iBACpB,UAAkB,EAClB,KAAY;IAEZ,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,sCAAsC;QAC9E,QAAQ,KAAK,CAAC;QACd,OAAO;IACT;IAEA,MAAM,iBAAiB,MAAM,SAAS,KAAK,OAAO,OAAO;IACzD,MAAM,mBAAmB,MAAM,WAAW,CAAC,WAAW;IACtD,MAAM,gBAAgB,IAAI,MAAM,CAAC,KAAK,KAAK,CAAC,MAAM,UAAU,GAAG;IAE/D,MAAM,QAAQ;QACZ,OAAO,GAAG,eAAe,uBAAuB,EAAE,MAAM,SAAS,CAAC,WAAW,IAAI;QACjF,aAAa,CAAC,EAAE,EAAE,iBAAiB,oBAAoB,CAAC;QACxD,OAAO,MAAM,SAAS,KAAK,OAAO,WAAW;QAC7C,QAAQ;YACN;gBACE,MAAM;gBACN,OAAO,CAAC,CAAC,EAAE,MAAM,KAAK,CAAC,OAAO,CAAC,IAAI;gBACnC,QAAQ;YACV;YACA;gBACE,MAAM;gBACN,OAAO,GAAG,MAAM,UAAU,CAAC,GAAG,EAAE,eAAe;gBAC/C,QAAQ;YACV;YACA;gBACE,MAAM;gBACN,OAAO,IAAI,KAAK,MAAM,SAAS,EAAE,cAAc;gBAC/C,QAAQ;YACV;YACA;gBACE,MAAM;gBACN,OAAO,MAAM,SAAS,KAAK,OAAO,qBAAqB;gBACvD,QAAQ;YACV;SACD;QACD,QAAQ;YACN,MAAM;QACR;QACA,WAAW,IAAI,KAAK,MAAM,SAAS,EAAE,WAAW;IAClD;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,YAAY;YACvC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,UAAU;gBACV,YAAY;gBACZ,QAAQ;oBAAC;iBAAM;YACjB;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,SAAS,UAAU,EAAE;QAClE;QAEA,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACT;AACF;AAEO,SAAS,mBAAmB,KAAY;IAC7C,MAAM,YAAY,MAAM,SAAS,KAAK,OAAO,QAAQ;IACrD,MAAM,QAAQ,MAAM,SAAS,KAAK,OAAO,OAAO;IAEhD,OAAO,GAAG,MAAM,CAAC,EAAE,UAAU,WAAW,EAAE,MAAM,KAAK,CAAC,OAAO,CAAC,GAAG,GAAG,EAAE,MAAM,UAAU,CAAC,eAAe,EAAE,MAAM,WAAW,CAAC,WAAW,GAAG,KAAK,CAAC;AAChJ"}},
    {"offset": {"line": 2401, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2407, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { TradingChart } from './components/TradingChart';\nimport { CombinedSignalAlerts } from './components/CombinedSignalAlerts';\nimport { SettingsPanel } from './components/SettingsPanel';\nimport { PerformanceMetrics } from './components/PerformanceMetrics';\nimport { useBTCStore } from './lib/store';\nimport { useBTCPriceStream, fetchHistoricalCandles } from './hooks/useBTCPrice';\nimport { UCSIndicator } from './lib/ucs-indicator';\nimport { calculateCamarillaPivots, getDailyCandle, getWeeklyCandle, getMonthlyCandle } from './lib/camarilla';\nimport { sendDiscordAlert } from './lib/discord';\nimport { Alert } from './types';\n\nexport default function BTCDashboard() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [indicatorEngine] = useState(() => new UCSIndicator());\n\n  const {\n    candles,\n    currentPrice,\n    activeSignals,\n    pivots,\n    alerts,\n    config,\n    setCandles,\n    addSignal,\n    setPivots,\n    addAlert,\n  } = useBTCStore();\n\n  // Initialize WebSocket connection\n  useBTCPriceStream();\n\n  // Load historical data on mount\n  useEffect(() => {\n    const loadHistoricalData = async () => {\n      try {\n        const historical = await fetchHistoricalCandles(1000); // Will fetch 48 hours\n        if (historical.length > 0) {\n          setCandles(historical);\n          \n          // Calculate initial pivots (daily, weekly, monthly)\n          const dailyCandle = getDailyCandle(historical);\n          const weeklyCandle = getWeeklyCandle(historical);\n          const monthlyCandle = getMonthlyCandle(historical);\n          \n          if (dailyCandle) {\n            const initialPivots = calculateCamarillaPivots(\n              dailyCandle,\n              weeklyCandle || undefined,\n              monthlyCandle || undefined\n            );\n            setPivots(initialPivots);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to load historical data:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadHistoricalData();\n  }, [setCandles, setPivots]);\n\n  // Run indicator ONCE on initial load only\n  const [signalsCalculated, setSignalsCalculated] = useState(false);\n\n  useEffect(() => {\n    if (candles.length < 32 || signalsCalculated) return; // Skip if already calculated\n\n    console.log('Calculating UCS signals for', candles.length, 'candles...');\n    \n    const { signals } = indicatorEngine.calculate(candles, {\n      highProb: config.enableHighProb,\n      midProb: config.enableMidProb,\n      lowProb: config.enableLowProb,\n    });\n\n    console.log('Found', signals.length, 'signals');\n\n    // Add all signals at once\n    signals.forEach(signal => {\n      const isDuplicate = activeSignals.some(\n        s => s.time === signal.time && s.type === signal.type\n      );\n\n      if (!isDuplicate && signal.confidence >= config.alertThreshold) {\n        addSignal(signal);\n\n        const alert: Alert = {\n          id: `${signal.time}-${signal.type}`,\n          timestamp: signal.time,\n          price: signal.price,\n          direction: signal.type === 'buy' ? 'up' : 'down',\n          confidence: signal.confidence,\n          probability: signal.probability,\n          outcome: 'pending',\n        };\n\n        addAlert(alert);\n\n        // Send Discord notification only for new real-time signals\n        if (signal.time > Date.now() - 60000 && config.discordWebhook) {\n          sendDiscordAlert(config.discordWebhook, alert);\n        }\n      }\n    });\n\n    setSignalsCalculated(true);\n  }, [candles.length >= 32]); // Only run when we have enough candles\n\n  // Recalculate pivots only once per day (check every minute, but only update if day changed)\n  useEffect(() => {\n    if (candles.length === 0) return;\n\n    const checkAndUpdatePivots = () => {\n      const dailyCandle = getDailyCandle(candles);\n      const weeklyCandle = getWeeklyCandle(candles);\n      const monthlyCandle = getMonthlyCandle(candles);\n      \n      if (dailyCandle) {\n        const newPivots = calculateCamarillaPivots(\n          dailyCandle,\n          weeklyCandle || undefined,\n          monthlyCandle || undefined\n        );\n        \n        // Only update if pivots actually changed (different day)\n        if (JSON.stringify(newPivots) !== JSON.stringify(pivots)) {\n          console.log('Pivots updated for new day/week/month');\n          setPivots(newPivots);\n        }\n      }\n    };\n\n    checkAndUpdatePivots();\n  }, [candles, pivots, setPivots]);\n\n  const latestSignal = activeSignals.length > 0 \n    ? activeSignals[activeSignals.length - 1] \n    : null;\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <div className=\"text-gray-400\">Loading BTC Dashboard...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-6\">\n      <div className=\"max-w-[1920px] mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent\">\n              BTC Reversal Dashboard\n            </h1>\n            <p className=\"text-gray-400 mt-2\">\n              UCS Extreme Snap Back • Real-time 1-min candles • Camarilla Pivots\n            </p>\n          </div>\n          \n          {/* Live Status */}\n          <div className=\"flex items-center gap-3 bg-gray-900 px-6 py-3 rounded-xl border border-gray-700\">\n            <div className=\"w-3 h-3 bg-green-500 rounded-full animate-pulse\" />\n            <span className=\"text-sm font-medium text-gray-300\">Live</span>\n          </div>\n        </div>\n\n        {/* Main Layout: Chart (Left) | Panels (Right) */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Left Side: Trading Chart */}\n          <div className=\"bg-gray-900 rounded-xl p-6 border border-gray-700\">\n            <TradingChart\n              candles={candles}\n              signals={activeSignals}\n              pivots={pivots}\n              currentPrice={currentPrice}\n            />\n          </div>\n\n          {/* Right Side: Panels */}\n          <div className=\"space-y-6\">\n            {/* Combined Signal + Alerts */}\n            <CombinedSignalAlerts\n              latestSignal={latestSignal}\n              currentPrice={currentPrice}\n              alerts={alerts}\n            />\n\n            {/* Performance Metrics */}\n            <PerformanceMetrics alerts={alerts} />\n\n            {/* Settings */}\n            <SettingsPanel />\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"text-center text-gray-500 text-sm py-4 border-t border-gray-800\">\n          <p>\n            Powered by Binance WebSocket • UCS Extreme Snap Back Indicator • Camarilla Pivot Points\n          </p>\n          <p className=\"mt-1 text-xs\">\n            Trading involves risk. Always do your own research.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2742, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}