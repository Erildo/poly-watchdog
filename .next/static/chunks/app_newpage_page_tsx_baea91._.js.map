{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/orcl/Desktop/pll/app/newpage/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { TradingChart } from './components/TradingChart';\nimport { CombinedSignalAlerts } from './components/CombinedSignalAlerts';\nimport { SettingsPanel } from './components/SettingsPanel';\nimport { PerformanceMetrics } from './components/PerformanceMetrics';\nimport { useBTCStore } from './lib/store';\nimport { useBTCPriceStream, fetchHistoricalCandles } from './hooks/useBTCPrice';\nimport { UCSIndicator } from './lib/ucs-indicator';\nimport { calculateCamarillaPivots, getDailyCandle } from './lib/camarilla';\nimport { sendDiscordAlert } from './lib/discord';\nimport { Alert } from './types';\n\nexport default function BTCDashboard() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [indicatorEngine] = useState(() => new UCSIndicator());\n\n  const {\n    candles,\n    currentPrice,\n    activeSignals,\n    pivots,\n    alerts,\n    config,\n    setCandles,\n    addSignal,\n    setPivots,\n    addAlert,\n  } = useBTCStore();\n\n  // Initialize WebSocket connection\n  useBTCPriceStream();\n\n  // Load historical data on mount\n  useEffect(() => {\n    const loadHistoricalData = async () => {\n      try {\n        const historical = await fetchHistoricalCandles(500);\n        if (historical.length > 0) {\n          setCandles(historical);\n          \n          // Calculate initial pivots\n          const dailyCandle = getDailyCandle(historical);\n          if (dailyCandle) {\n            const initialPivots = calculateCamarillaPivots(dailyCandle);\n            setPivots(initialPivots);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to load historical data:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadHistoricalData();\n  }, [setCandles, setPivots]);\n\n  // Run indicator on new candles\n  useEffect(() => {\n    if (candles.length < 32) return; // Need minimum candles for indicator\n\n    const { signals, indicators } = indicatorEngine.calculate(candles, {\n      highProb: config.enableHighProb,\n      midProb: config.enableMidProb,\n      lowProb: config.enableLowProb,\n    });\n\n    // Process new signals\n    signals.forEach(signal => {\n      // Check if signal already exists\n      const isDuplicate = activeSignals.some(\n        s => s.time === signal.time && s.type === signal.type\n      );\n\n      if (!isDuplicate && signal.confidence >= config.alertThreshold) {\n        addSignal(signal);\n\n        // Create alert\n        const alert: Alert = {\n          id: `${signal.time}-${signal.type}`,\n          timestamp: signal.time,\n          price: signal.price,\n          direction: signal.type === 'buy' ? 'up' : 'down',\n          confidence: signal.confidence,\n          probability: signal.probability,\n          outcome: 'pending',\n        };\n\n        addAlert(alert);\n\n        // Send Discord notification\n        if (config.discordWebhook) {\n          sendDiscordAlert(config.discordWebhook, alert);\n        }\n      }\n    });\n\n    // Update pivots daily\n    const dailyCandle = getDailyCandle(candles);\n    if (dailyCandle) {\n      const newPivots = calculateCamarillaPivots(dailyCandle);\n      if (JSON.stringify(newPivots) !== JSON.stringify(pivots)) {\n        setPivots(newPivots);\n      }\n    }\n  }, [candles, config, activeSignals, pivots, addSignal, addAlert, setPivots, indicatorEngine]);\n\n  const latestSignal = activeSignals.length > 0 \n    ? activeSignals[activeSignals.length - 1] \n    : null;\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\" />\n          <div className=\"text-gray-400\">Loading BTC Dashboard...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-6\">\n      <div className=\"max-w-[1920px] mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent\">\n              BTC Reversal Dashboard\n            </h1>\n            <p className=\"text-gray-400 mt-2\">\n              UCS Extreme Snap Back • Real-time 1-min candles • Camarilla Pivots\n            </p>\n          </div>\n          \n          {/* Live Status */}\n          <div className=\"flex items-center gap-3 bg-gray-900 px-6 py-3 rounded-xl border border-gray-700\">\n            <div className=\"w-3 h-3 bg-green-500 rounded-full animate-pulse\" />\n            <span className=\"text-sm font-medium text-gray-300\">Live</span>\n          </div>\n        </div>\n\n        {/* Main Layout: Chart (Left) | Panels (Right) */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Left Side: Trading Chart */}\n          <div className=\"bg-gray-900 rounded-xl p-6 border border-gray-700\">\n            <TradingChart\n              candles={candles}\n              signals={activeSignals}\n              pivots={pivots}\n              currentPrice={currentPrice}\n            />\n          </div>\n\n          {/* Right Side: Panels */}\n          <div className=\"space-y-6\">\n            {/* Combined Signal + Alerts */}\n            <CombinedSignalAlerts\n              latestSignal={latestSignal}\n              currentPrice={currentPrice}\n              alerts={alerts}\n            />\n\n            {/* Performance Metrics */}\n            <PerformanceMetrics alerts={alerts} />\n\n            {/* Settings */}\n            <SettingsPanel />\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"text-center text-gray-500 text-sm py-4 border-t border-gray-800\">\n          <p>\n            Powered by Binance WebSocket • UCS Extreme Snap Back Indicator • Camarilla Pivot Points\n          </p>\n          <p className=\"mt-1 text-xs\">\n            Trading involves risk. Always do your own research.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}