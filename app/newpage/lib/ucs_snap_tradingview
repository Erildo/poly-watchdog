
// Created by UCSgears

study(title="UCS_Extreme Snap Back", shorttitle="UCS_Snapback", overlay=true, precision = 0)

// NO INPUTS - TRADING SYSTEM

hps = input (true, title = "High Probability Setup")
mps = input (false, title = "Mid Probability Setup")
lps = input (false, title = "Low Probability Setup")

// Inputs per video on youtube
src = ohlc4
len1 = 7
len2 = 14
len3 = 21
len4 = 32

// Moving Average (Mid Point Fair Value)
ma1 = sma(src, len1)
ma2 = sma(src, len2)
ma3 = sma(src, len3)
ma4 = sma(src, len4)

// ATR (Dynamic Volatility Units)
rng1 = sma(tr,len1)
rng2 = sma(tr,len2)
rng3 = sma(tr,len3)
rng4 = sma(tr,len4)

// ATR deviation or Secret Sauce of the promoter
up1 = ma1 + rng1 * 1.6
up2 = ma2 + rng2 * 2.4
up3 = ma2 + rng3 * 3.2

dn1 = ma1 - rng1 * 1.6
dn2 = ma2 - rng2 * 2.4
dn3 = ma2 - rng2 * 3.2



// Low Probability Trade Setup
ERhigh1 = high > up1 ? 1 : 0
ERlow1 = low < dn1 ? 1 : 0

// Medium Probability Trade Setup
ERhigh2 = high > up1 and high > up2 ? 1 : 0
ERlow2 = low < dn1 and low < dn2 ? 1 : 0

// High Probability Trade Setup
ERhigh3 = high > up1 and high > up2 and high > up3 ? 1 : 0
ERlow3 = low < dn1 and low < dn2 and low < dn3 ? 1 : 0

// Plots Based on Selection
HiPERh = hps and ERhigh3[1] != 1 and ERhigh3 ? 1 : 0
HiPERl = hps and ERlow3[1] != 1 and ERlow3 ? 1: 0

MiPERh = mps and HiPERh == 0 and ERhigh2[1] != 1 and ERhigh2 ? 1 : 0
MiPERl = mps and HiPERl == 0 and ERlow2[1] != 1 and ERlow2 ? 1: 0

LoPERh = lps and HiPERh == 0 and MiPERh == 0 and ERhigh1[1] != 1 and ERhigh1 ? 1 : na
LoPERl = lps and HiPERl == 0 and MiPERl == 0 and ERlow1[1] != 1 and ERlow1 ? 1: na

// PLOT
plotshape(HiPERh, style = shape.labeldown, location = location.abovebar, color = gray, text = "Sell", textcolor = white, title = "High Probability Setup")
plotshape(HiPERl, style = shape.labelup, location = location.belowbar, color = green, text = "Buy", textcolor = white, title = "High Probability Setup")
plotshape(MiPERh, style = shape.labeldown, location = location.abovebar, color = orange, text = "Mid Prob", textcolor = white, title = "Mid Probability Setup")
plotshape(MiPERl, style = shape.labelup, location = location.belowbar, color = lime, text = "Mid Prob", textcolor = white, title = "Mid Probability Setup")
plotshape(LoPERh, style = shape.labeldown, location = location.abovebar, color = orange, text = "Low Prob", textcolor = white, title = "Low Probability Setup")
plotshape(LoPERl, style = shape.labelup, location = location.belowbar, color = lime, text = "Low Prob", textcolor = white, title = "Low Probability Setup")